syntax = "proto3";

package nexus.v1;

option go_package = "github.com/nexuscloud/platform/pkg/api/v1";

service ComputeService {
  rpc CreateInstance (CreateInstanceRequest) returns (Instance);
  rpc GetInstance (GetInstanceRequest) returns (Instance);
  rpc ListInstances (ListInstancesRequest) returns (ListInstancesResponse);
  rpc DeleteInstance (DeleteInstanceRequest) returns (DeleteInstanceResponse);
}

message Instance {
  string id = 1;
  string name = 2;
  string region = 3;
  string size = 4;
  string image = 5;
  string status = 6;
  string ipv4_address = 7;
  string created_at = 8;
}

message CreateInstanceRequest {
  string name = 1;
  string region = 2;
  string size = 3;
  string image = 4;
  repeated string ssh_keys = 5;
}

message GetInstanceRequest {
  string id = 1;
}

message ListInstancesRequest {
  string project_id = 1;
  int32 page_size = 2;
  string page_token = 3;
}

message ListInstancesResponse {
  repeated Instance instances = 1;
  string next_page_token = 2;
}

message DeleteInstanceRequest {
  string id = 1;
}

message DeleteInstanceResponse {
  bool success = 1;
}
